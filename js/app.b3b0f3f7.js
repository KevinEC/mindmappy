(function(t){function e(e){for(var n,c,a=e[0],r=e[1],h=e[2],p=0,u=[];p<a.length;p++)c=a[p],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&u.push(o[c][0]),o[c]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);d&&d(e);while(u.length)u.shift()();return s.push.apply(s,h||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],n=!0,a=1;a<i.length;a++){var r=i[a];0!==o[r]&&(n=!1)}n&&(s.splice(e--,1),t=c(c.s=i[0]))}return t}var n={},o={app:0},s=[];function c(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,c),i.l=!0,i.exports}c.m=t,c.c=n,c.d=function(t,e,i){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(c.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(i,n,function(e){return t[e]}.bind(null,n));return i},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/mindmappy/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],r=a.push.bind(a);a.push=e,a=a.slice();for(var h=0;h<a.length;h++)e(a[h]);var d=r;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"1ce0":function(t,e,i){},"4d74":function(t,e,i){"use strict";i("cb91")},"4d7d":function(t,e,i){},"51c4":function(t,e,i){"use strict";i("1ce0")},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("7a23"),o={id:"app"};function s(t,e,i,s,c,a){var r=Object(n["j"])("canvas-viewport"),h=Object(n["j"])("mindmap-topics"),d=Object(n["j"])("reset-btn");return Object(n["g"])(),Object(n["c"])("div",o,[Object(n["e"])(r,{topics:t.allTopicsComputed,topicsLength:t.topicsLengthComputed,onCreateNewTopic:a.createNewTopic},null,8,["topics","topicsLength","onCreateNewTopic"]),Object(n["e"])(h,{createNewTopicPos:a.createNewTopicPosComputed},null,8,["createNewTopicPos"]),Object(n["e"])(d)])}var c=i("5530"),a={class:"viewport"},r=Object(n["e"])("div",{id:"createTopicGraphics"},null,-1);function h(t,e,i,o,s,c){return Object(n["g"])(),Object(n["c"])("div",a,[r])}i("a9e3"),i("159b"),i("38cf");var d=i("5a89"),p=i("5502"),u=i("920c"),l=i("32ab"),g=i("22b5"),f=i("ab51"),m={props:{topics:Object,topicsLength:Number},data:function(){return{height:0,allTopics:null,graph:null,createTopicObject:null,mouseData:{prevSampleCounter:9}}},computed:Object(c["a"])(Object(c["a"])({},Object(p["c"])(["getCreatingTopic","getAllTopicsLength","getAllTopics","getShiftKey","getPressedTopicId","getTopicById","getMenuBtn"])),Object(p["d"])(["topicsMounted"])),watch:{topicsMounted:function(){this.allTopics=this.getAllTopics,null===this.graph&&this.initGraph()}},mounted:function(){var t=this;this.allTopics=this.topics,this.init(),this.animate(),window.addEventListener("resize",(function(){t.resize(t.$el.offsetWidth,t.$el.offsetHeight)}),this),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp),document.addEventListener("keypress",this.onKeyPress),this.$el.addEventListener("mousemove",this.handleMouseMove),this.$el.addEventListener("mousedown",this.handleMouseDown),this.$el.addEventListener("mouseup",this.handleMouseUp)},methods:Object(c["a"])(Object(c["a"])({},Object(p["b"])(["updateCanvasMouseMove","updateCanvasMousePressed","setScene","setCamera","updateTopicById","setShiftKey","deselectAllTopics","setGraph","setGraphLayout","setMenuOption","saveTopicsToLocalStorage","setRemoveConnectionId","menuKeyEvent"])),{},{setSize:function(){this.width=this.$el.offsetWidth,this.height=this.$el.offsetHeight},resize:function(t,e){this.camera.aspect=t/e,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,e),this.controls.handleResize(),this.renderer.render(this.scene,this.camera)},initRenderer:function(){this.renderer=new l["b"],this.renderer.setSize(this.width,this.height),this.$el.appendChild(this.renderer.domElement)},initCamera:function(){this.camera=new d["h"](90,this.width/this.height,1,1e3),this.camera.position.z=300,this.setCamera(this.camera)},initControls:function(){this.controls=new u["a"](this.camera,this.renderer.domElement),this.controls.enabled=!1,this.controls.rotateSpeed=1,this.controls.zoomSpeed=.2,this.controls.panSpeed=.1,this.controls.noZoom=!1,this.controls.noPan=!1,this.controls.noRotate=!0,this.controls.staticMoving=!1,this.controls.dynamicDampingFactor=.05,this.controls.mouseButtons.LEFT=d["d"].PAN,this.controls.mouseButtons.RIGHT=d["d"].ROTATE},initScene:function(){this.scene=new d["j"],this.scene.background=new d["a"](13421772),this.scene.fog=new d["c"](13421772,.002),this.setScene(this.scene)},init:function(){var t=this;this.setSize(),this.initRenderer(),this.initCamera(),this.initControls(),this.initScene(),this.initCreateTopic(),this.renderer.render(this.scene,this.camera),this.controls.addEventListener("change",(function(){t.renderer.render(t.scene,t.camera)}))},initCreateTopic:function(){this.createTopicObject=new l["a"](this.$el.querySelector("#createTopicGraphics")),this.createTopicObject.position.x=0,this.createTopicObject.position.y=0,this.createTopicObject.position.z=0,this.createTopicObject.width=this.createTopicObject.element.offsetWidth,this.createTopicObject.height=this.createTopicObject.element.offsetHeight,this.initCreatTopicIdleAnimation(),this.scene.add(this.createTopicObject)},updateSceneObjects:function(){var t=this;this.allTopics.forEach((function(e){e.object.position.x=e.pos.x,e.object.position.y=e.pos.y,e.object.position.z=0,t.scene.add(e.object)}),this)},updateCreateTopicObject:function(t,e){this.createTopicObject.position.x=t+this.camera.position.x,this.createTopicObject.position.y=e+this.camera.position.y,this.collideWith(this.createTopicObject,this.allTopics)||this.getCreatingTopic?this.setCreateTopicOpacity(!1):this.setCreateTopicOpacity(!0)},animate:function(){var t=this;window.requestAnimationFrame((function(){t.animate(),g.update(),t.controls.update(),t.renderer.render(t.scene,t.camera)}))},collideWith:function(t,e){var i=!1;return e.forEach((function(e){Math.abs(t.position.x-e.object.position.x)<t.width&&Math.abs(t.position.y-e.object.position.y)<t.height&&(i=!0)})),i},onKeyDown:function(t){"Control"!==t.key&&"Alt"!==t.key||(this.controls.enabled=!0,this.setCreateTopicOpacity(!1),t.preventDefault()),"Shift"===t.key&&this.setShiftKey(!0),"รถ"!==t.key&&"ร"!==t.key||this.saveTopicsToLocalStorage(),71!==t.keyCode&&103!==t.keyCode||this.menuKeyEvent("down"),this.handleMenu(t)},onKeyUp:function(t){"Control"!==t.key&&"Alt"!==t.key||(this.controls.enabled=!1,this.setCreateTopicOpacity(!1)),"Shift"===t.key&&this.setShiftKey(!1),71!==t.keyCode&&103!==t.keyCode||(this.gBtnPressed=!1,this.menuKeyEvent("up"))},handleMouseMove:function(t){this.updateMouseData(t),this.updateCreateTopicObject(this.mouseData.xThree,this.mouseData.yThree)},handleMouseDown:function(t){this.pressed=!0,this.updateCanvasMousePressed(!0),this.pressedX=t.clientX,this.pressedY=t.clientY,this.handleMenu(t),this.setRemoveConnectionId(null)},handleMouseUp:function(){this.pressed=!1,this.updateCanvasMousePressed(!1)},updateMouseData:function(t){var e=this.$el.offsetHeight/(2*this.camera.position.z),i=(t.clientX-this.$el.offsetWidth/2)/e,n=(-t.clientY+this.$el.offsetHeight/2)/e;this.mouseData.xThree=i,this.mouseData.yThree=n,9===this.mouseData.prevSampleCounter&&(this.mouseData.prevXClient=t.clientX,this.mouseData.prevYClient=t.clientY,this.mouseData.prevSampleCounter=0),this.mouseData.prevSampleCounter+=1;var o=t.clientX-this.mouseData.prevXClient,s=t.clientY-this.mouseData.prevYClient,c=Math.sqrt(Math.pow(o,2)+Math.pow(s,2));this.mouseData.speed=c;var a=Math.atan(-s/o);if(this.mouseData.angle=a,this.pressed){var r=(t.clientX-this.pressedX)/e,h=(-t.clientY+this.pressedY)/e;this.mouseData.deltaX=r,this.mouseData.deltaY=h,this.mouseData.pressedX=this.pressedX,this.mouseData.pressedY=this.pressedY}this.updateCanvasMouseMove(this.mouseData)},setCreateTopicOpacity:function(t){t?(this.createTopicObject.element.style.opacity=1,this.createTopicObject.element.style.zIndex=10):(this.createTopicObject.element.style.opacity=0,this.createTopicObject.element.style.zIndex=-1)},initCreatTopicIdleAnimation:function(){var t=this;new g.Tween({scaleX:.98}).to({scaleX:1.015},750).easing(g.Easing.Quadratic.InOut).repeat(1/0).yoyo(!0).onUpdate((function(e){t.createTopicObject.scale.x=e.scaleX})).start(),new g.Tween({scaleY:.995}).to({scaleY:1.01},750).easing(g.Easing.Quadratic.InOut).repeat(1/0).yoyo(!0).delay(150).onUpdate((function(e){t.createTopicObject.scale.y=e.scaleY})).start(),new g.Tween({rotation:-Math.PI/4}).to({rotation:Math.PI/4},4e3).easing(g.Easing.Sinusoidal.InOut).yoyo(!0).repeat(1/0).onUpdate((function(e){t.createTopicObject.rotation.z=e.rotation}))},createNewTopic:function(t){1===t.button&&(this.createNewTopic({x:this.mouseData.xThree,y:this.mouseData.yThree}),this.setCreateTopicOpacity(!1))},handleMenu:function(t){var e,i=this.getMenuBtn;"mouse"==i&&(e=1),"g"==i&&(e=71),(t.button===e||t.keyCode===e&&!this.gBtnPressed)&&(this.gBtnPressed=!0,this.setCreateTopicOpacity(!1),this.setMenuOption({right:{title:"create topic",id:"createTopic"}}))},initGraph:function(){var t=this,e=[],i=[];this.getAllTopics.forEach((function(t){e.push(""+t.id),t.connections.forEach((function(e){i.push([""+t.id,""+e.id,e.k])}))}));var n,o,s={nodes:e,edges:i};this.graph=new f.Graph,this.graph.loadJSON(s),this.graphLayout=new f.Layout.ForceDirected(this.graph,120,50,.6,0,10);var c=50;this.setGraph(this.graph),this.setGraphLayout(this.graphLayout),this.graphRenderer=new f.Renderer(this.graphLayout,(function(){}),(function(){}),(function(e,i){n=i.p.x*c,o=i.p.y*c,t.updateTopicById({id:e.id,updateData:{pos:{x:n,y:o},graphNode:{node:e,point:i}}})})),this.graphRenderer.start()},recalculateGraph:function(){this.getAllTopics.forEach((function(t){t.graphNode.point.p.x=t.pos.x/50,t.graphNode.point.p.y=t.pos.y/50})),this.graphRenderer.start()}})};i("989a");m.render=h;var v=m,y={class:"topics"};function b(t,e,i,o,s,c){var a=Object(n["j"])("topic-lines-svg"),r=Object(n["j"])("new-mindmap-topic"),h=Object(n["j"])("pie-menu"),d=Object(n["j"])("mindmap-topic");return Object(n["g"])(),Object(n["c"])("div",y,[Object(n["e"])(a),Object(n["e"])(r,{pos:i.createNewTopicPos},null,8,["pos"]),Object(n["e"])(h),(Object(n["g"])(!0),Object(n["c"])(n["a"],null,Object(n["i"])(t.getAllTopics,(function(t,e){return Object(n["g"])(),Object(n["c"])(d,{data:t,onCSS3DObjectInit:c.atCSS3DObjectInit,key:t.id,tabindex:e},null,8,["data","onCSS3DObjectInit","tabindex"])})),128))])}function T(t,e,i,o,s,c){return Object(n["g"])(),Object(n["c"])("div",{class:["topic",c.classesComputed],tabindex:-2},Object(n["k"])(i.data.title),3)}var O=i("b85c"),C=(i("99af"),i("b680"),i("07ac"),i("b64b"),i("22b5")),j={props:{data:Object,tabindex:Number},data:function(){return{object:null,id:null,selected:!1,pressed:!1,floating:!1,floatAnimation:null,floatingTweens:null,blobAnimation:null,bornAnimationPlop:null,bornAnimationMovement:null,bornAnimationStart:!1,born:!1,localMenuActive:!1,currMouseX:0,currMouseY:0,prevMouseX:0,prevMouseY:0,preventFloatingResume:!1,pos:{}}},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(p["c"])(["getCanvasMouseMove","getCanvasMousePressed","getShiftKey","getSelectedTopicsLength","getSelectedTopics","getTopicCoordinateExtremeties","getTopicById","getGraph","getScene","getGraphLayout","getCreatingNewConnection","getNewConnection","getRemoveConnectionId","getMenuActive","getMenuBtn"])),Object(p["d"])(["canvasMouseMove","canvasMouseMovement","deselectAllTopicsSignal","topicUpdatedSignal","menuKeyDownSignal"])),{},{selectedComputed:function(){return this.selected},floatingComputed:function(){return this.floating},classesComputed:function(){var t="";return this.selectedComputed&&(t+="selected "),this.floatingComputed&&(t+="floating "),this.data.root&&(t+="root "),this.getMenuActive&&(t+="blur "),this.born&&(t+="bornAnimation "),this.bornAnimationStart&&(t+="hide "),t},positionComputed:function(){return this.object?"x: ".concat(this.object.position.x.toFixed(0),", y: ").concat(this.object.position.y.toFixed(0),", "):""}}),mounted:function(){this.$el.addEventListener("mousemove",this.handleMouseMove),this.$el.addEventListener("mouseleave",this.handleMouseLeave),this.$el.addEventListener("mousedown",this.handleMouseDown),this.$el.addEventListener("mouseup",this.handleMouseUp),this.$el.addEventListener("keydown",this.onKeyDown),this.id=this.data.id,this.born=this.data.born,this.born&&(this.bornAnimationStart=!0),this.initCSS3DObject(),this.updateTopicById({id:this.id,updateData:{object:this.object}}),this.$emit("CSS3DObjectInit",this.object),this.initFloating(),this.initBlobAnimation(),this.data.born&&this.initBornAninmation()},watch:{canvasMouseMovement:function(){this.handleCanvasMouseMove()},deselectAllTopicsSignal:function(){this.getSelectedTopics[0]!==this.id&&(this.selected=!1)},floating:function(t){this.handleFloatingAnimation(t)}},methods:Object(c["a"])(Object(c["a"])({},Object(p["b"])(["updateTopicById","setPressedTopic","toggleSelectedTopic","deselectAllTopicsBut","toggleFloatingTopic","triggerFloatingTopicsSignal","setNewConnection","pushTopicConnection","setRemoveConnectionId","removeConnection","removeNode","setMenuOption","setConnectionGlow","removeConnectionGlow"])),{},{handleCanvasMouseMove:function(){if(this.getCanvasMousePressed&&this.pressed){this.setPressedTopic(this.id),this.currMouseX=this.getCanvasMouseMove.deltaX,this.currMouseY=this.getCanvasMouseMove.deltaY,this.prevMouseX=d["e"].lerp(this.prevMouseX,this.currMouseX,.1),this.prevMouseY=d["e"].lerp(this.prevMouseY,this.currMouseY,.1);var t=this.pressedObjX+this.currMouseX,e=this.pressedObjY+this.currMouseY;this.pos.x=t,this.pos.y=e,this.object.position.x=t,this.object.position.y=e,this.getTopicById(this.id).graphNode.point.p.x=t/50,this.getTopicById(this.id).graphNode.point.p.y=e/50,this.updateTopicById({id:this.id,updateData:{pos:{x:t,y:e}}})}},handleMouseDown:function(t){0===t.button&&(this.pressed=!0),this.bornAnimationMovement&&this.bornAnimationMovement._isPlaying&&(this.born=!1,this.bornAnimationMovement.stop()),this.pressedX=t.clientX,this.pressedY=t.clientY,this.pressedObjX=this.object.position.x,this.pressedObjY=this.object.position.y,this.setPressedTopic(this.id),this.handleSelection(),this.handleMenu(t),this.handleGraphNodeMouseDown(),this.handleNewConnection(t),this.handleRemoveConnection(),this.floating&&(this.floatingPaused=!0,this.handleFloatingAnimation(!1))},handleMouseUp:function(t){this.pressed=!1,this.setPressedTopic(null),this.handleGraphNodeMouseUp(),this.floatingPaused&&!this.preventFloatingResume&&(this.initFloatAnimation(),this.handleFloatingAnimation(!0),this.floatingPaused=!1),1===t.button&&(this.localMenuActive=!1)},handleMouseMove:function(){null!=this.getRemoveConnectionId&&this.setConnectionGlow({node1:this.id,node2:this.getRemoveConnectionId})},handleMouseLeave:function(){null!=this.getRemoveConnectionId&&this.removeConnectionGlow({node1:this.id,node2:this.getRemoveConnectionId})},onKeyDown:function(t){"c"!=t.key&&"C"!=t.key||this.initNewConnection("normal"),"x"!=t.key&&"X"!=t.key||this.initNewConnection("weak"),"b"!=t.key&&"B"!=t.key||this.initRemoveConnection(),"n"!=t.key&&"N"!=t.key||(this.remove(),this.removeNode(this.id))},initCSS3DObject:function(){null===this.object&&(this.object=new l["a"](this.$el),this.object.userData=this.data,this.object.position.z=0,this.getScene.add(this.object))},handleSelection:function(){this.getShiftKey?(this.selected=!this.selected,this.toggleSelectedTopic(this.id)):this.selected?(this.selected=!1,this.deselectAllTopicsBut("all")):(this.selected=!0,this.toggleSelectedTopic(this.id),this.deselectAllTopicsBut(this.id))},toggleFloating:function(){this.floating=!this.floating,this.floating?(this.initFloatAnimation(),this.preventFloatingResume=!1):this.preventFloatingResume=!0,this.handleBlobAnimation(),this.toggleFloatingTopic(this.id)},initNewConnection:function(t){this.setNewConnection({from:this.id,to:null,type:t})},handleNewConnection:function(){if(this.getCreatingNewConnection&&this.getNewConnection.from!=this.id){var t={from:this.getNewConnection.from,to:this.id,type:this.getNewConnection.type};this.setNewConnection(t),this.pushTopicConnection(t)}},initFloatAnimation:function(){for(var t=this,e=10,i=[],n=this.getTopicCoordinateExtremeties,o=0;o<e;o++){var s=n.minX+Math.random()*Math.abs(n.minX-n.maxX),c=n.minY+Math.random()*Math.abs(n.minY-n.maxY);i.push({x:s,y:c})}for(var a,r,h=[],d=1e4,p=0;p<e;p++)0==p?(a=this.object.position.x,r=this.object.position.y):(a=i[p-1].x,r=i[p-1].y),h.push(new C.Tween({x:a,y:r}).to({x:i[p].x,y:i[p].y},d).easing(C.Easing.Quadratic.InOut).onUpdate((function(e){t.object.position.x=e.x,t.object.position.y=e.y,t.getTopicById(t.id).graphNode&&(t.getTopicById(t.id).graphNode.point.p.x=e.x/50,t.getTopicById(t.id).graphNode.point.p.y=e.y/50),t.updateTopicById({id:t.id,updateData:{pos:{x:e.x,y:e.y}}}),t.triggerFloatingTopicsSignal()})));h.forEach((function(t,e){e<h.length-1?h[e].chain(h[e+1]):h[h.length-1].chain(h[0])})),this.floatAnimation=h[0],this.floatingTweens=h},initFloating:function(){void 0!=this.data.floating&&(this.floating=this.data.floating,this.floating&&(this.object.position.x=this.data.pos.x,this.object.position.y=this.data.pos.y,this.initFloatAnimation()),this.toggleFloatingTopic(this.id))},initBlobAnimation:function(){var t=this,e=.2,i=1;this.blobAnimation=new C.Tween({scaleX:e,scaleY:e}).to({scaleX:i,scaleY:i},750).easing(C.Easing.Elastic.Out).onUpdate((function(e){t.object.scale.x=e.scaleX,t.object.scale.y=e.scaleY}))},handleBlobAnimation:function(){this.blobAnimation._isPlaying?(this.blobAnimation.stop(),this.blobAnimation.start()):this.blobAnimation.start()},handleFloatingAnimation:function(t){if(t)this.floatingTweens[0].start();else{var e,i=Object(O["a"])(this.floatingTweens);try{for(i.s();!(e=i.n()).done;){var n=e.value;n._isPlaying&&n.stop()}}catch(o){i.e(o)}finally{i.f()}}},initBornAninmation:function(){var t=this;this.born=!1;var e=650;this.bornAnimationPlopX=new C.Tween({scaleX:.2}).to({scaleX:[1.4,1]},e).delay(200).interpolation(C.Interpolation.CatmullRom).easing(C.Easing.Back.Out).onStart((function(){t.born=!0,t.bornAnimationStart=!1})).onUpdate((function(e){t.object.scale.x=e.scaleX})).start(),this.bornAnimationPlopY=new C.Tween({scaleY:0}).to({scaleY:[.8,1.7,1]},e).delay(200).interpolation(C.Interpolation.CatmullRom).easing(C.Easing.Back.Out).onStart((function(){t.born=!0,t.bornAnimationStart=!1})).onUpdate((function(e){t.object.scale.y=e.scaleY})).start();var i=(1900+900*Math.random()).toFixed(0),n=(400*Math.random()).toFixed(0);this.bornAnimationMovement=new C.Tween({x:this.data.pos.x,y:this.data.pos.y}).to({x:this.data.pos.x-20+40*Math.random(),y:this.data.pos.y-20+40*Math.random()},i).delay(n).repeat(1/0).yoyo(!0).easing(C.Easing.Cubic.Out).onUpdate((function(e){t.object.position.x=e.x,t.object.position.y=e.y,t.getTopicById(t.id).graphNode&&(t.getTopicById(t.id).graphNode.point.p.x=e.x/50,t.getTopicById(t.id).graphNode.point.p.y=e.y/50)})).start()},handleGraphNodeMouseDown:function(){var t,e=this;this.getTopicById(this.id).graphNode&&this.getGraphLayout.graph.adjacency[this.id]&&(this.getTopicById(this.id).graphNode.point.m=100,this.getCreatingNewConnection||Object.values(this.getGraphLayout.graph.adjacency[this.id]).forEach((function(i){t=i[0].id,e.getGraphLayout.edgeSprings[t].k=20})))},handleGraphNodeMouseUp:function(){var t=this;if(this.getTopicById(this.id).graphNode&&this.getGraphLayout.graph.adjacency[this.id]){var e,i;this.getTopicById(this.id).graphNode.point.m=1;var n,o={};this.data.connections.forEach((function(n){"weak"!=n.type&&(e=t.getTopicById(n.id),i=Math.sqrt(Math.pow(t.pos.x-e.pos.x,2)+Math.pow(t.pos.y-e.pos.y,2)),o[n.id]=i)}));var s=this.getGraphLayout.graph.adjacency[this.id];Object.keys(s).forEach((function(e){if(n=s[e][0].id,o[e]){var i=1/o[e]*1e4;t.getGraphLayout.edgeSprings[n].k=i}}))}},initRemoveConnection:function(){this.setRemoveConnectionId(this.id)},handleRemoveConnection:function(){null!=this.getRemoveConnectionId?this.removeConnection({from:this.getRemoveConnectionId,to:this.id}):console.log("no connection to remove here!")},remove:function(){var t=this;this.object.parent.remove(this.object),this.data.connections.forEach((function(e){t.removeConnection({from:t.id,to:e.id,removeAdjacent:!0})}))},handleMenu:function(t){var e,i=this.getMenuBtn;if("mouse"==i&&(e=1),"g"==i&&(e=71),console.log("btn id in topic",e),1===t.button){var n={containsLayeredOptions:!0,right:{title:"new connection",id:"newConnection",payload:{localConnectionFn:this.initNewConnection}},down:{title:"remove topic",id:"removeTopic",payload:{localRemoveFn:this.remove,id:this.id}},up:{title:"toggle floating",id:"toggleFloating",payload:{toggleFloating:this.toggleFloating}}};1===this.getSelectedTopics.length&&(n.left={title:"remove connection",id:"removeConnection",payload:{localRemoveConnectionFn:this.initRemoveConnection}}),this.setMenuOption(n),t&&t.stopPropagation()}}})};i("4d74");j.render=T;var w=j,S=Object(n["e"])("defs",null,[Object(n["e"])("filter",{id:"red-glow"},[Object(n["e"])("feDropShadow",{dx:"0",dy:"0",stdDeviation:"2.5","flood-color":"red"})])],-1);function E(t,e,i,o,s,c){return Object(n["g"])(),Object(n["c"])("div",{id:"topicLinesRoot",class:c.blurComputed},[(Object(n["g"])(),Object(n["c"])("svg",{width:s.svgWidth,height:s.svgHeight,id:"topicLinesSvg",xmlns:"http://www.w3.org/2000/svg"},[S],8,["width","height"]))],2)}i("5319"),i("ac1f");var M={data:function(){return{object:null,svg:null,svgWidth:1e4,svgHeight:1e4}},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(p["c"])(["getScene","getAllTopics","getTopicById","getCanvasMousePressed","getPressedTopicId","getFloatingTopics","getNewConnection","getCanvasMouseMove","getMenuActive","getCamera"])),Object(p["d"])(["canvasMouseMovement","floatingTopicsSignal","topicUpdatedSignal","creatingNewConnection","connectionRemovedSignal","connectionsToRemove","glowingConnection","removeGlowingConnection"])),{},{blurComputed:function(){return this.getMenuActive?"blur":""}}),mounted:function(){this.init()},watch:{canvasMouseMovement:function(){this.getPressedTopicId&&this.updateLines(),this.creatingNewConnection?this.updateNewConnectionLine():this.removeNewConnectionLine()},topicUpdatedSignal:function(){this.updateAllLines()},floatingTopicsSignal:function(){this.updateFloatingLines()},connectionRemovedSignal:function(){this.removeLine()},glowingConnection:function(t){this.setGlowingConnection(t)},removeGlowingConnection:function(t){this.handleRemoveGlowingConnection(t)}},methods:{init:function(){this.svg=this.$el.querySelector("#topicLinesSvg"),this.object=new l["a"](this.$el),this.getScene.add(this.object),this.initLines()},initLines:function(){var t=this;this.getAllTopics.forEach((function(e){e.connections.length>0&&e.connections.forEach((function(i){t.createLine(e,t.getTopicById(i.id),i.type)}))}))},createLine:function(t,e,i){var n=this.cssifyId(t.id),o=this.cssifyId(e.id);if(void 0==this.svg.querySelector(".line".concat(n,".line").concat(o))){var s=this.threeToSvg(t.pos),c=this.threeToSvg(e.pos),a=document.createElementNS("http://www.w3.org/2000/svg","line");a.setAttribute("class","line line"+n+" line"+o),a.setAttribute("x1","".concat(s.x)),a.setAttribute("y1","".concat(s.y)),a.setAttribute("x2","".concat(c.x)),a.setAttribute("y2","".concat(c.y)),void 0==i||"normal"==i?(a.setAttribute("stroke","black"),a.setAttribute("stroke-width","2")):"weak"==i&&(a.setAttribute("stroke","black"),a.setAttribute("stroke-dasharray","5,5"),a.setAttribute("stroke-width","1")),this.svg.appendChild(a)}},updateLines:function(){var t=this,e=this.getTopicById(this.getPressedTopicId);void 0!=e&&e.connections.forEach((function(i){t.updateLine(e,t.getTopicById(i.id))}))},updateAllLines:function(){var t=this;this.getAllTopics.forEach((function(e){e.connections.forEach((function(i){t.updateLine(e,t.getTopicById(i.id))}))}))},updateFloatingLines:function(){var t,e=this,i=this.getFloatingTopics;i.forEach((function(i){t=e.getTopicById(i),t.connections.forEach((function(i){e.updateLine(t,e.getTopicById(i.id))}))}))},updateLine:function(t,e){if(t&&e){var i=this.cssifyId(t.id),n=this.cssifyId(e.id),o=this.svg.querySelector(".line".concat(i,".line").concat(n));if(void 0==o)return void this.createLine(t,e,this.newConnectionType);var s=this.threeToSvg(t.pos),c=this.threeToSvg(e.pos);o.setAttribute("x1","".concat(s.x)),o.setAttribute("y1","".concat(s.y)),o.setAttribute("x2","".concat(c.x)),o.setAttribute("y2","".concat(c.y))}},updateNewConnectionLine:function(){var t=this.getCanvasMouseMove,e=this.getTopicById(this.getNewConnection.from).object.position,i={x:t.xThree+this.getCamera.position.x,y:t.yThree+this.getCamera.position.y},n=this.threeToSvg(e),o=this.threeToSvg(i),s=this.svg.querySelector("#newConnectionLine");void 0==s&&(s=document.createElementNS("http://www.w3.org/2000/svg","line")),s.setAttribute("id","newConnectionLine"),s.setAttribute("x1","".concat(n.x)),s.setAttribute("y1","".concat(n.y)),s.setAttribute("x2","".concat(o.x)),s.setAttribute("y2","".concat(o.y)),this.newConnectionType=this.getNewConnection.type,"normal"==this.getNewConnection.type?(s.setAttribute("stroke","black"),s.setAttribute("stroke-width","2")):"weak"==this.getNewConnection.type&&(s.setAttribute("stroke","black"),s.setAttribute("stroke-dasharray","5,5"),s.setAttribute("stroke-width","1")),this.svg.appendChild(s)},removeNewConnectionLine:function(){var t=this.svg.querySelector("#newConnectionLine");t&&(t.remove(),this.updateAllLines())},removeLine:function(){var t,e,i=this;console.log("connectionsToRemove",this.connectionsToRemove),this.connectionsToRemove.forEach((function(n){t=i.cssifyId(n.from),e=i.cssifyId(n.to),i.svg.querySelector(".line".concat(t,".line").concat(e)).remove()}))},setGlowingConnection:function(t){if(t){var e=this.cssifyId(t.node1),i=this.cssifyId(t.node2),n=this.svg.querySelector(".line".concat(e,".line").concat(i));n&&n.setAttribute("style","\n\t\t\t\t\t\tfilter: url(#red-glow);\n\t\t\t\t\t\tstroke: rgb(255, 87, 87);\n\t\t\t\t\t")}},handleRemoveGlowingConnection:function(t){if(t){var e=this.cssifyId(t.node1),i=this.cssifyId(t.node2),n=this.svg.querySelector(".line".concat(e,".line").concat(i));n&&n.setAttribute("style","\n\t\t\t\t\t\tstroke: black;\n\t\t\t\t\t")}},threeToSvg:function(t){var e=t.x+this.svgWidth/2,i=-t.y+this.svgHeight/2;return{x:e,y:i}},cssifyId:function(t){return t+="",t=t.replaceAll(" ","-"),t=t.replace(/[^a-zA-Z0-9 ]/g,""),t}}};i("b754");M.render=E;var N=M,A={class:"newTopic"};function I(t,e,i,o,s,c){return Object(n["g"])(),Object(n["c"])("div",A,[Object(n["e"])("form",{onSubmit:e[2]||(e[2]=Object(n["m"])((function(){return c.submitNewTopic&&c.submitNewTopic.apply(c,arguments)}),["prevent"])),class:"form"},[Object(n["e"])("input",{onBlur:e[1]||(e[1]=function(){return c.blur&&c.blur.apply(c,arguments)}),tabindex:"5",type:"text",class:"createInput"},null,32)],32)])}var x=i("22b5"),_={props:{pos:Object},data:function(){return{object:null}},watch:{newTopicPos:function(){this.createNewTopic()}},computed:Object(c["a"])(Object(c["a"])({},Object(p["c"])(["getScene","getCamera","getGraph"])),Object(p["d"])(["newTopicPos"])),mounted:function(){this.init()},methods:Object(c["a"])(Object(c["a"])({},Object(p["b"])(["setCreatingTopic","pushTopic"])),{},{init:function(){this.object=new l["a"](this.$el),this.getScene.add(this.object),this.object.position.z=0,this.object.visible=!1,this.initIdleAnimation()},createNewTopic:function(){var t=this;this.setCreatingTopic(!0),this.object.position.x=this.newTopicPos.x+this.getCamera.position.x,this.object.position.y=this.newTopicPos.y+this.getCamera.position.y,this.object.visible=!0,setTimeout((function(){t.$el.querySelector(".createInput").focus()}),50)},submitNewTopic:function(t){t.preventDefault();var e=t.target[0].value,i=e+this.object.position.x.toFixed(0)+this.object.position.y.toFixed(0);this.pushTopic({title:e,floating:!1,born:!0,id:i,pos:{x:this.object.position.x,y:this.object.position.y},connections:[]}),console.log(this.getGraph.newNode({id:i})),this.setCreatingTopic(!1),this.$el.querySelector(".createInput").value="",this.object.visible=!1},blur:function(){this.setCreatingTopic(!1),this.$el.querySelector(".createInput").value="",this.object.visible=!1},initIdleAnimation:function(){var t=this;new x.Tween({scaleX:.95}).to({scaleX:1.055},1250).easing(x.Easing.Quadratic.InOut).repeat(1/0).yoyo(!0).onUpdate((function(e){t.object.scale.x=e.scaleX})).start(),new x.Tween({scaleY:.955}).to({scaleY:1.04},1250).easing(x.Easing.Quadratic.InOut).repeat(1/0).yoyo(!0).delay(150).onUpdate((function(e){t.object.scale.y=e.scaleY})).start()}})};i("51c4");_.render=I;var P=_,D={id:"pieMenuRoot",tabindex:"-10",oncontextmenu:"event.preventDefault();"},L={class:"menu"},B=Object(n["e"])("div",{class:"center"},null,-1),F={class:"slice up"},R={key:0,class:"title"},k={class:"slice right"},G={key:0,class:"title"},U={class:"slice left"},Y={key:0,class:"title"},X={class:"slice down"},$={key:0,class:"title"},K=Object(n["e"])("div",{class:"cover"},null,-1);function z(t,e,i,o,s,c){return Object(n["g"])(),Object(n["c"])("div",D,[Object(n["e"])("div",L,[B,Object(n["e"])("div",{class:["slices",c.hoverComputed]},[Object(n["e"])("div",F,[c.upOption?(Object(n["g"])(),Object(n["c"])("div",R,[Object(n["e"])("span",null,Object(n["k"])(c.upOption),1)])):Object(n["d"])("",!0)]),Object(n["e"])("div",k,[c.rightOption?(Object(n["g"])(),Object(n["c"])("div",G,[Object(n["e"])("span",null,Object(n["k"])(c.rightOption),1)])):Object(n["d"])("",!0)]),Object(n["e"])("div",U,[c.leftOption?(Object(n["g"])(),Object(n["c"])("div",Y,[Object(n["e"])("span",null,Object(n["k"])(c.leftOption),1)])):Object(n["d"])("",!0)]),Object(n["e"])("div",X,[c.downOption?(Object(n["g"])(),Object(n["c"])("div",$,[Object(n["e"])("span",null,Object(n["k"])(c.downOption),1)])):Object(n["d"])("",!0)])],2)]),K])}var q=i("22b5"),H={data:function(){return{object:null,id:"pie-menu",cancel:!1,options:null,svgLine:null,svgWidth:220,svgHeight:220,leftElm:null,rightElm:null,upElm:null,downElm:null,hover:"",startPos:null,cameraAnimation:null}},watch:{menuOptionsSignal:function(){this.options=Object(c["a"])({layeredMenu:!1,containsLayeredOptions:!1},this.getMenuOptions),this.options.layeredMenu||(this.object.position.x=this.getCanvasMouseMove.xThree+this.getCamera.position.x,this.object.position.y=this.getCanvasMouseMove.yThree+this.getCamera.position.y,this.startPos={x:this.object.position.x,y:this.object.position.y}),this.object.visible=!0,this.setMenuActive(!0),this.options.layeredMenu||this.startCameraAnimation()},canvasMouseMovement:function(){this.object.visible&&this.setHover()},menuKeyUpSignal:function(){this.onKeyUp()}},mounted:function(){var t=this;this.object=new l["a"](this.$el),this.object.position.z=1,this.object.visible=!1,this.svgLine=this.$el.querySelector("#menuLine"),this.leftElm=this.$el.querySelector(".left"),this.rightElm=this.$el.querySelector(".right"),this.upElm=this.$el.querySelector(".up"),this.downElm=this.$el.querySelector(".down"),this.$el.addEventListener("mouseup",this.handleMouseUp),this.$el.addEventListener("mousedown",this.handleMouseDown),window.setTimeout((function(){t.getScene.add(t.object)}),200)},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(p["c"])(["getScene","getCamera","getGraph","getMenuOptions","getCanvasMouseMove","getMenuBtn"])),Object(p["d"])(["menuOptionsSignal","canvasMouseMovement","menuKeyUpSignal"])),{},{upOption:function(){return this.options&&this.options.up?this.options.up.title:""},rightOption:function(){return this.options&&this.options.right?this.options.right.title:""},leftOption:function(){return this.options&&this.options.left?this.options.left.title:""},downOption:function(){return this.options&&this.options.down?this.options.down.title:""},hoverComputed:function(){return this.hover}}),methods:Object(c["a"])(Object(c["a"])({},Object(p["b"])(["createNewNode","removeNode","setMenuOption","setMenuActive"])),{},{upAction:function(){this[this.options.up.id](this.options.up.payload),this.object.visible=!1},rightAction:function(){this[this.options.right.id](this.options.right.payload),this.object.visible=!1},leftAction:function(){this[this.options.left.id](this.options.left.payload),this.object.visible=!1},downAction:function(){this[this.options.down.id](this.options.down.payload),this.object.visible=!1},updateLine:function(){var t={x:this.getCanvasMouseMove.xThree+this.svgWidth/2-this.object.position.x-10,y:-this.getCanvasMouseMove.yThree+this.svgHeight/2+this.object.position.y-10};this.svgLine.setAttribute("x2","".concat(t.x)),this.svgLine.setAttribute("y2","".concat(t.y))},handleMouseDown:function(t){1!==t.button&&0!==t.button||(this.options.left&&"left"==this.determineDirection()?this.leftAction():this.options.right&&"right"==this.determineDirection()?this.rightAction():this.options.up&&"up"==this.determineDirection()?this.upAction():this.options.down&&"down"==this.determineDirection()&&this.downAction(),this.object.visible=!1,this.setMenuActive(!1),this.reverseCameraAnimation())},handleMouseUp:function(t){var e;this.cancel=!1,2===t.button&&(this.object.visible=!1,this.cancel=!0,this.setMenuActive(!1),this.reverseCameraAnimation()),"mouse"==this.getMenuBtn&&(e=1),t.button!==e||this.cancel||(this.options.left&&"left"==this.determineDirection()?this.leftAction():this.options.right&&"right"==this.determineDirection()?this.rightAction():this.options.up&&"up"==this.determineDirection()?this.upAction():this.options.down&&"down"==this.determineDirection()&&this.downAction(),this.object.visible=!1,this.setMenuActive(!1),this.reverseCameraAnimation())},onKeyUp:function(){"g"!=this.getMenuBtn||this.cancel||(this.options.left&&"left"==this.determineDirection()?this.leftAction():this.options.right&&"right"==this.determineDirection()?this.rightAction():this.options.up&&"up"==this.determineDirection()?this.upAction():this.options.down&&"down"==this.determineDirection()&&this.downAction(),this.object.visible=!1,this.setMenuActive(!1),this.reverseCameraAnimation())},startCameraAnimation:function(){var t=this;this.initalCameraZ=this.getCamera.position.z,this.cameraAnimation=new q.Tween({z:this.initalCameraZ}).to({z:this.initalCameraZ+20},2200).easing(q.Easing.Elastic.Out).onUpdate((function(e){t.getCamera.position.z=e.z})).start()},reverseCameraAnimation:function(){var t=this;this.cameraAnimation&&this.cameraAnimation.stop(),this.options.containsLayeredOptions||new q.Tween({z:this.getCamera.position.z}).to({z:this.initalCameraZ},2200).easing(q.Easing.Elastic.Out).onUpdate((function(e){t.getCamera.position.z=e.z})).start()},setHover:function(){"left"==this.determineDirection()?this.hover="left":"right"==this.determineDirection()?this.hover="right":"up"==this.determineDirection()?this.hover="up":"down"==this.determineDirection()&&(this.hover="down")},determineDirection:function(){var t=this.startPos,e={x:this.getCanvasMouseMove.xThree+this.getCamera.position.x,y:this.getCanvasMouseMove.yThree+this.getCamera.position.y},i=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),n=e.x-t.x,o=e.y-t.y,s=Math.acos(n/i)*(180/Math.PI);return o<0&&(s=180-s+180),s>315||s<45?"right":s>45&&s<135?"up":s>135&&s<225?"left":s>225&&s<315?"down":void 0},createTopic:function(){this.createNewNode({x:this.getCanvasMouseMove.xThree,y:this.getCanvasMouseMove.yThree})},removeTopic:function(t){var e=t.localRemoveFn,i=t.id;e(),this.removeNode(i)},toggleFloating:function(t){t.toggleFloating()},newConnection:function(t){var e=t.localConnectionFn;this.setMenuOption({layeredMenu:!0,right:{title:"regular connection",id:"regularConnection",payload:{localConnectionFn:e}},left:{title:"weak connection",id:"weakConnection",payload:{localConnectionFn:e}}})},regularConnection:function(t){var e=t.localConnectionFn;e("normal")},weakConnection:function(t){var e=t.localConnectionFn;e("weak")},removeConnection:function(t){var e=t.localRemoveConnectionFn;e()}})};i("7d02");H.render=z;var V=H,W={components:{MindmapTopic:w,NewMindmapTopic:P,PieMenu:V,TopicLinesSvg:N},props:{createNewTopicPos:Object},data:function(){return{allCSS3DObjects:[]}},computed:Object(c["a"])({},Object(p["c"])(["getAllTopics"])),methods:Object(c["a"])(Object(c["a"])({},Object(p["b"])(["setTopicsMounted"])),{},{atCSS3DObjectInit:function(t){this.allCSS3DObjects.push(t),this.allCSS3DObjects.length===this.getAllTopics.length&&this.setTopicsMounted(!0)}})};W.render=b;var J=W,Z={class:"resetBtnRoot"},Q={key:0,id:"prompt"},tt=Object(n["e"])("p",null,"Are you sure you want to reset your mindmap?",-1);function et(t,e,i,o,s,c){return Object(n["g"])(),Object(n["c"])("div",Z,[Object(n["e"])("button",{class:"resetBtn",onClick:e[1]||(e[1]=function(){return c.togglePrompt&&c.togglePrompt.apply(c,arguments)})}," reset data "),c.promptComputed?(Object(n["g"])(),Object(n["c"])("div",Q,[tt,Object(n["e"])("button",{onClick:e[2]||(e[2]=function(){return c.resetLocalStorage&&c.resetLocalStorage.apply(c,arguments)})},"Yes, clear data"),Object(n["e"])("button",{onClick:e[3]||(e[3]=function(){return c.togglePrompt&&c.togglePrompt.apply(c,arguments)})},"No")])):Object(n["d"])("",!0)])}var it={data:function(){return{prompt:!1,midBtn:!0,gBtn:!1}},mounted:function(){"mouse"==this.getMenuBtn&&this.setMid(),"g"==this.getMenuBtn&&this.setG()},computed:Object(c["a"])(Object(c["a"])({},Object(p["c"])(["getMenuBtn"])),{},{promptComputed:function(){return this.prompt},midClass:function(){return this.midBtn?"active":""},gClass:function(){return this.gBtn?"active":""}}),methods:Object(c["a"])(Object(c["a"])({},Object(p["b"])(["setMenuBtn"])),{},{resetLocalStorage:function(){window.localStorage.clear(),this.prompt=!1},togglePrompt:function(){this.prompt=!this.prompt,console.log("prompt",this.prompt)},setMid:function(){this.setMenuBtn("mouse"),this.midBtn=!0,this.gBtn=!1},setG:function(){this.setMenuBtn("g"),this.midBtn=!1,this.gBtn=!0}})};i("916b");it.render=et;var nt=it,ot={name:"App",components:{CanvasViewport:v,MindmapTopics:J,ResetBtn:nt},beforeCreate:function(){this.$store.commit("INIT_TOPICS")},data:function(){return{allTopics:[],createNewTopicPos:{},topicsLength:null}},computed:{createNewTopicPosComputed:function(){return this.createNewTopicPos}},methods:Object(c["a"])(Object(c["a"])({},Object(p["b"])(["initTopics"])),{},{createNewTopic:function(t){this.createNewTopicPos=t}})};i("f5f3");ot.render=s;var st=ot,ct=(i("c740"),i("a434"),i("7db0"),Object(p["a"])({state:{canvasMousePressed:!1,canvasMouseMove:{},canvasMouseMovement:null,scene:null,camera:null,pressedTopicId:null,creatingTopic:!1,topicsMounted:0,shiftKey:!1,deselectAllTopicsSignal:0,topicUpdatedSignal:0,graph:null,graphlayout:null,newConnection:null,creatingNewConnection:!1,connectionRemovedSignal:0,connectionsToRemove:[],glowingConnection:null,menuActive:!1,menuBtn:"mouse",selectedTopics:[],floatingTopics:[],floatingTopicsSignal:0,topics:[{title:"Smart Home",root:!0,id:"root",pos:{x:-100,y:0},connections:[]},{title:"Appliances",id:1,pos:{x:50,y:80},connections:[{id:"root",k:100}]},{title:"lights",id:11,pos:{x:250,y:80},connections:[{id:1,k:100}]},{title:"speakers",id:12,pos:{x:250,y:140},connections:[{id:1,k:100}]},{title:"door",id:13,pos:{x:250,y:200},connections:[{id:1,k:100}]},{title:"Control Mediums",id:2,pos:{x:50,y:-80},connections:[{id:"root",k:10}]},{title:"Voice",id:21,pos:{x:250,y:-80},connections:[{id:2,k:100}]},{title:"Smartphone",id:22,pos:{x:250,y:-160},connections:[{id:2,k:100}]},{title:"Dedicated screen touch interface",id:23,pos:{x:250,y:-220},connections:[{id:2,k:100}]},{title:"Screen built into wall",id:231,pos:{x:350,y:-220},connections:[{id:23,k:100}]},{title:"Mobile device",id:232,pos:{x:350,y:-300},connections:[{id:23,k:100}]}]},mutations:{INIT_TOPICS:function(t){var e=window.localStorage.getItem("topics");void 0!=e&&(t.topics=JSON.parse(e));var i=window.localStorage.getItem("menuBtn");void 0!=i&&(t.menuBtn=i)},SAVE_TOPICS_TO_LOCAL_STORAGE:function(t){var e=JSON.stringify(t.topics);window.localStorage.setItem("topics",e)},SET_CANVAS_MOUSE_MOVE:function(t,e){t.canvasMouseMove=Object(c["a"])(Object(c["a"])({},t.canvasMouseMove),e),t.canvasMouseMovement=Math.random()},SET_CANVAS_MOUSE_PRESSED:function(t,e){t.canvasMousePressed=e},SET_SCENE:function(t,e){t.scene=e},SET_NODES_PARENT:function(t,e){t.nodesParent=e},SET_CAMERA:function(t,e){t.camera=e},CREATE_NEW_NODE:function(t,e){t.newTopicPos=e},SET_CREATING_TOPIC:function(t,e){t.creatingTopic=e},PUSH_TOPIC:function(t,e){t.topics.push(e)},UPDATE_TOPIC_BY_ID:function(t,e){var i=e.topicToUpdate,n=e.updateData,o=t.topics.findIndex((function(t){return t.id===i.id}));t.topics[o]=Object(c["a"])(Object(c["a"])({},i),n),void 0!=n.pos&&t.pressedTopicId!==i.id&&(t.topics[o].object.position.x=n.pos.x,t.topics[o].object.position.y=n.pos.y),t.topicUpdatedSignal=Math.random()},SET_PRESSED_TOPIC_ID:function(t,e){t.pressedTopicId=e},SET_TOPICS_MOUNTED:function(t,e){e&&(t.topicsMounted=Math.random())},TOGGLE_SELECTED_TOPIC:function(t,e){var i=t.selectedTopics.findIndex((function(t){return t===e}));-1===i?t.selectedTopics.push(e):t.selectedTopics.splice(i,1)},SET_SHIFT_KEY:function(t,e){t.shiftKey=e},DESELECT_ALL_TOPICS_BUT:function(t,e){t.selectedTopics="all"===e?[]:[e],t.deselectAllTopicsSignal=Math.random()},TOGGLE_FLOATING_TOPIC_BY_ID:function(t,e){var i=t.floatingTopics.findIndex((function(t){return t===e}));-1===i?t.floatingTopics.push(e):t.floatingTopics.splice(i,1),t.floatingTopicsSignal=Math.random()},TRIGGER_FLOATING_TOPICS_SIGNAL:function(t){t.floatingTopicsSignal=Math.random()},SET_GRAPH_LAYOUT:function(t,e){t.graphLayout=e},SET_GRAPH:function(t,e){t.graph=e},SET_NEW_CONNECTION:function(t,e){t.creatingNewConnection=!0,t.newConnection=Object(c["a"])(Object(c["a"])({},t.newConnection),e)},PUSH_TOPIC_CONNECTION:function(t,e){var i,n=e.topicToUpdate,o=e.toNode,s=e.connection;void 0==s.type||"normal"==s.type?i=40:"weak"==s.type&&(i=5),n.connections.push({id:s.to,k:i,type:s.type});var c=n.graphNode.node,a=o.graphNode.node;t.graph.newEdge(c,a,i),t.creatingNewConnection=!1},SET_REMOVE_CONNECTION_ID:function(t,e){t.removeConnectionId=e},REMOVE_CONNECTION:function(t,e){var i,n,o,s=!1,c=e.from.id,a=e.to.id,r=null;t.connectionsToRemove=[];for(var h=0;h<2;h++)0===h&&(o="from",i=c,n=a),1===h&&(o="to",i=a,n=c),e[o].connections.forEach((function(t,e){t.id==n&&(r=e,s=!0)})),s&&e.removeAdjacent&&function(){console.log("adjacent nodes in graph: ",t.graph);var e=void 0,n=void 0;t.graph.edges.forEach((function(o){o.target.id==i&&(e=t.topics.find((function(t){return t.id==o.source.id})),n=e.connections.findIndex((function(t){return t.id==i})),t.connectionsToRemove.push({from:i,to:e.id}),e.connections.splice(n,1))}))}(),s&&(e[o].connections.splice(r,1),t.connectionsToRemove.push({from:i,to:n}),t.graph.removeEdge(t.graph.adjacency[i][n][0])),s=!1;t.connectionRemovedSignal=Math.random(),t.removeConnectionId=null},REMOVE_NODE:function(t,e){var i=t.topics[e].graphNode.node;t.graph.removeNode(i),t.topics.splice(e,1)},SET_MENU_OPTION:function(t,e){t.menuOptions=e,t.menuOptionsSignal=Math.random()},SET_MENU_ACTIVE:function(t,e){t.menuActive=e},SET_CONNECTION_GLOW:function(t,e){t.glowingConnection=e},REMOVE_CONNECTION_GLOW:function(t,e){t.removeGlowingConnection=e},SET_MENU_BTN:function(t,e){t.menuBtn=e,window.localStorage.setItem("menuBtn",e)},MENU_KEY_EVENT:function(t,e){"up"==e&&(t.menuKeyUpSignal=Math.random()),"down"==e&&(t.menuKeyDownSignal=Math.random())}},actions:{initTopics:function(t){var e=t.commit;e("INIT_TOPICS")},saveTopicsToLocalStorage:function(t){var e=t.commit;e("SAVE_TOPICS_TO_LOCAL_STORAGE")},updateCanvasMouseMove:function(t,e){var i=t.commit;i("SET_CANVAS_MOUSE_MOVE",e)},updateCanvasMousePressed:function(t,e){var i=t.commit;i("SET_CANVAS_MOUSE_PRESSED",e)},setScene:function(t,e){var i=t.commit;i("SET_SCENE",e)},setNodesParent:function(t,e){var i=t.commit;i("SET_NODES_PARENT",e)},setCamera:function(t,e){var i=t.commit;i("SET_CAMERA",e)},setCreatingTopic:function(t,e){var i=t.commit;i("SET_CREATING_TOPIC",e)},createNewNode:function(t,e){var i=t.commit;i("CREATE_NEW_NODE",e)},pushTopic:function(t,e){var i=t.commit;i("PUSH_TOPIC",e)},pushTopicObject:function(t,e){var i=t.commit;i("PUSH_TOPIC_OBJECT",e)},setTopicObjects:function(t,e){var i=t.commit;i("SET_TOPIC_OBJECTS",e)},updateTopicById:function(t,e){var i=t.commit,n=t.getters,o=e.id,s=e.updateData,c=n.getTopicById(o);c&&i("UPDATE_TOPIC_BY_ID",{topicToUpdate:c,updateData:s})},setPressedTopic:function(t,e){var i=t.commit;i("SET_PRESSED_TOPIC_ID",e)},setTopicsMounted:function(t,e){var i=t.commit;i("SET_TOPICS_MOUNTED",e)},toggleSelectedTopic:function(t,e){var i=t.commit;i("TOGGLE_SELECTED_TOPIC",e)},setShiftKey:function(t,e){var i=t.commit;i("SET_SHIFT_KEY",e)},deselectAllTopicsBut:function(t,e){var i=t.commit;i("DESELECT_ALL_TOPICS_BUT",e)},toggleFloatingTopic:function(t,e){var i=t.commit;i("TOGGLE_FLOATING_TOPIC_BY_ID",e)},triggerFloatingTopicsSignal:function(t){var e=t.commit;e("TRIGGER_FLOATING_TOPICS_SIGNAL")},setGraphLayout:function(t,e){var i=t.commit;i("SET_GRAPH_LAYOUT",e)},setGraph:function(t,e){var i=t.commit;i("SET_GRAPH",e)},setNewConnection:function(t,e){var i=t.commit,n=e.from,o=e.to,s=e.type;i("SET_NEW_CONNECTION",{from:n,to:o,type:s})},pushTopicConnection:function(t,e){var i=t.commit,n=t.getters,o=n.getTopicById(e.from),s=n.getTopicById(e.to);i("PUSH_TOPIC_CONNECTION",{topicToUpdate:o,toNode:s,connection:e})},setRemoveConnectionId:function(t,e){var i=t.commit;i("SET_REMOVE_CONNECTION_ID",e)},removeConnection:function(t,e){var i=t.commit,n=t.getters,o=e.from,s=e.to,c=e.removeAdjacent,a=void 0!==c&&c,r={};r.from=n.getTopicById(o),r.to=n.getTopicById(s),r.removeAdjacent=a,console.log("topics in remove connectiopn",r),i("REMOVE_CONNECTION",r)},removeNode:function(t,e){var i=t.commit,n=t.getters,o=n.getTopicIndexById(e);i("REMOVE_NODE",o)},setMenuOption:function(t,e){var i=t.commit;i("SET_MENU_OPTION",e)},setMenuActive:function(t,e){var i=t.commit;i("SET_MENU_ACTIVE",e)},setConnectionGlow:function(t,e){var i=t.commit;i("SET_CONNECTION_GLOW",e)},removeConnectionGlow:function(t,e){var i=t.commit;i("REMOVE_CONNECTION_GLOW",e)},setMenuBtn:function(t,e){var i=t.commit;i("SET_MENU_BTN",e)},menuKeyEvent:function(t,e){var i=t.commit;i("MENU_KEY_EVENT",e)}},getters:{getCanvasMouseMove:function(t){return t.canvasMouseMove},getCanvasMousePressed:function(t){return t.canvasMousePressed},getScene:function(t){return t.scene},getNodesParent:function(t){return t.nodesParent},getCamera:function(t){return t.camera},getCreatingTopic:function(t){return t.creatingTopic},getAllTopics:function(t){return t.topics},getTopicById:function(t){return function(e){return t.topics.find((function(t){return t.id==e}))}},getTopicIndexById:function(t){return function(e){return t.topics.findIndex((function(t){return t.id==e}))}},getPressedTopicId:function(t){return t.pressedTopicId},getShiftKey:function(t){return t.shiftKey},getSelectedTopicsLength:function(t){return t.selectedTopics.length},getSelectedTopics:function(t){return t.selectedTopics},getFloatingTopics:function(t){return t.floatingTopics},getTopicCoordinateExtremeties:function(t){var e,i=0,n=0,o=0,s=0,c=Object(O["a"])(t.topics);try{for(c.s();!(e=c.n()).done;){var a=e.value;a.pos.x>i&&(i=a.pos.x),a.pos.x<n&&(n=a.pos.x),a.pos.y>o&&(o=a.pos.y),a.pos.y<s&&(s=a.pos.y)}}catch(r){c.e(r)}finally{c.f()}return{minX:n,maxX:i,minY:s,maxY:o}},getGraphLayout:function(t){return t.graphLayout},getGraph:function(t){return t.graph},getNewConnection:function(t){return t.newConnection},getCreatingNewConnection:function(t){return t.creatingNewConnection},getRemoveConnectionId:function(t){return t.removeConnectionId},getMenuOptions:function(t){return t.menuOptions},getMenuActive:function(t){return t.menuActive},getMenuBtn:function(t){return t.menuBtn}}})),at=ct,rt=Object(n["b"])(st);rt.use(at),rt.mount("#app")},"5b27":function(t,e,i){},"798b":function(t,e,i){},"7d02":function(t,e,i){"use strict";i("9ae7")},"916b":function(t,e,i){"use strict";i("4d7d")},"989a":function(t,e,i){"use strict";i("798b")},"9ae7":function(t,e,i){},"9c79":function(t,e,i){},ab51:function(t,e,i){var n;i("7037").default;i("159b"),i("a434"),i("fb6a"),i("d3b7"),function(o,s){n=function(){return o.returnExportsGlobal=s()}.call(e,i,e,t),void 0===n||(t.exports=n)}(this,(function(){var t={},e=t.Graph=function(){this.nodeSet={},this.nodes=[],this.edges=[],this.adjacency={},this.nextNodeId=0,this.nextEdgeId=0,this.eventListeners=[]},i=t.Node=function(t,e){e.id?this.id=e.id:this.id=t,this.data=void 0!==e?e:{}},n=t.Edge=function(t,e,i,n){this.id=t,this.source=e,this.target=i,this.data=void 0!==n?n:{}};e.prototype.addNode=function(t){return t.id in this.nodeSet||this.nodes.push(t),this.nodeSet[t.id]=t,this.notify(),t},e.prototype.addNodes=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t],n=new i(e,{label:e});this.addNode(n)}},e.prototype.addEdge=function(t){var e=!1;return this.edges.forEach((function(i){t.id===i.id&&(e=!0)})),e||this.edges.push(t),t.source.id in this.adjacency||(this.adjacency[t.source.id]={}),t.target.id in this.adjacency[t.source.id]||(this.adjacency[t.source.id][t.target.id]=[]),e=!1,this.adjacency[t.source.id][t.target.id].forEach((function(i){t.id===i.id&&(e=!0)})),e||this.adjacency[t.source.id][t.target.id].push(t),this.notify(),t},e.prototype.addEdges=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t],i=this.nodeSet[e[0]];if(void 0==i)throw new TypeError("invalid node name: "+e[0]);var n=this.nodeSet[e[1]];if(void 0==n)throw new TypeError("invalid node name: "+e[1]);var o=e[2];this.newEdge(i,n,o)}},e.prototype.newNode=function(t){var e=new i(this.nextNodeId++,t);return this.addNode(e),e},e.prototype.newEdge=function(t,e,i){var o=new n(this.nextEdgeId++,t,e,i);return this.addEdge(o),o},e.prototype.loadJSON=function(t){("string"==typeof t||t instanceof String)&&(t=JSON.parse(t)),("nodes"in t||"edges"in t)&&(this.addNodes.apply(this,t["nodes"]),this.addEdges.apply(this,t["edges"]))},e.prototype.getEdges=function(t,e){return t.id in this.adjacency&&e.id in this.adjacency[t.id]?this.adjacency[t.id][e.id]:[]},e.prototype.removeNode=function(t){t.id in this.nodeSet&&delete this.nodeSet[t.id];for(var e=this.nodes.length-1;e>=0;e--)this.nodes[e].id===t.id&&this.nodes.splice(e,1);this.detachNode(t)},e.prototype.detachNode=function(t){var e=this.edges.slice();e.forEach((function(e){e.source.id!==t.id&&e.target.id!==t.id||this.removeEdge(e)}),this),this.notify()},e.prototype.removeEdge=function(t){for(var e=this.edges.length-1;e>=0;e--)this.edges[e].id===t.id&&this.edges.splice(e,1);for(var i in this.adjacency){for(var n in this.adjacency[i]){for(var o=this.adjacency[i][n],s=o.length-1;s>=0;s--)this.adjacency[i][n][s].id===t.id&&this.adjacency[i][n].splice(s,1);0==this.adjacency[i][n].length&&delete this.adjacency[i][n]}r(this.adjacency[i])&&delete this.adjacency[i]}this.notify()},e.prototype.merge=function(t){var e=[];t.nodes.forEach((function(t){e.push(this.addNode(new i(t.id,t.data)))}),this),t.edges.forEach((function(t){var i=e[t.from],o=e[t.to],s=t.directed?s=t.type+"-"+i.id+"-"+o.id:i.id<o.id?t.type+"-"+i.id+"-"+o.id:t.type+"-"+o.id+"-"+i.id,c=this.addEdge(new n(s,i,o,t.data));c.data.type=t.type}),this)},e.prototype.filterNodes=function(t){var e=this.nodes.slice();e.forEach((function(e){t(e)||this.removeNode(e)}),this)},e.prototype.filterEdges=function(t){var e=this.edges.slice();e.forEach((function(e){t(e)||this.removeEdge(e)}),this)},e.prototype.addGraphListener=function(t){this.eventListeners.push(t)},e.prototype.notify=function(){this.eventListeners.forEach((function(t){t.graphChanged()}))};var o=t.Layout={};o.ForceDirected=function(t,e,i,n,o,s){this.graph=t,this.stiffness=e,this.repulsion=i,this.damping=n,this.minEnergyThreshold=o||.01,this.maxSpeed=s||1/0,this.nodePoints={},this.edgeSprings={}},o.ForceDirected.prototype.point=function(t){if(!(t.id in this.nodePoints)){var e=void 0!==t.data.mass?t.data.mass:1;this.nodePoints[t.id]=new o.ForceDirected.Point(c.random(),e,t.id)}return this.nodePoints[t.id]},o.ForceDirected.prototype.spring=function(t){if(!(t.id in this.edgeSprings)){var e=void 0!==t.data.length?t.data.length:1,i=!1,n=this.graph.getEdges(t.source,t.target);if(n.forEach((function(t){!1===i&&t.id in this.edgeSprings&&(i=this.edgeSprings[t.id])}),this),!1!==i)return new o.ForceDirected.Spring(i.point1,i.point2,0,0);this.graph.getEdges(t.target,t.source);if(n.forEach((function(t){!1===i&&t.id in this.edgeSprings&&(i=this.edgeSprings[t.id])}),this),!1!==i)return new o.ForceDirected.Spring(i.point2,i.point1,0,0);this.edgeSprings[t.id]=new o.ForceDirected.Spring(this.point(t.source),this.point(t.target),e,t.data)}return this.edgeSprings[t.id]},o.ForceDirected.prototype.eachNode=function(t){var e=this;this.graph.nodes.forEach((function(i){t.call(e,i,e.point(i))}))},o.ForceDirected.prototype.eachEdge=function(t){var e=this;this.graph.edges.forEach((function(i){t.call(e,i,e.spring(i))}))},o.ForceDirected.prototype.eachSpring=function(t){var e=this;this.graph.edges.forEach((function(i){t.call(e,e.spring(i))}))},o.ForceDirected.prototype.applyCoulombsLaw=function(){this.eachNode((function(t,e){this.eachNode((function(t,i){if(e!==i){var n=e.p.subtract(i.p),o=n.magnitude()+.1,s=n.normalise();e.applyForce(s.multiply(this.repulsion).divide(o*o*.5)),i.applyForce(s.multiply(this.repulsion).divide(o*o*-.5))}}))}))},o.ForceDirected.prototype.applyHookesLaw=function(){this.eachSpring((function(t){var e=t.point2.p.subtract(t.point1.p),i=t.length-e.magnitude(),n=e.normalise();t.point1.applyForce(n.multiply(t.k*i*-.5)),t.point2.applyForce(n.multiply(t.k*i*.5))}))},o.ForceDirected.prototype.attractToCentre=function(){this.eachNode((function(t,e){var i=e.p.multiply(-1);e.applyForce(i.multiply(this.repulsion/50))}))},o.ForceDirected.prototype.updateVelocity=function(t){this.eachNode((function(e,i){i.v=i.v.add(i.a.multiply(t)).multiply(this.damping),i.v.magnitude()>this.maxSpeed&&(i.v=i.v.normalise().multiply(this.maxSpeed)),i.a=new c(0,0)}))},o.ForceDirected.prototype.updatePosition=function(t){this.eachNode((function(e,i){i.p=i.p.add(i.v.multiply(t))}))},o.ForceDirected.prototype.totalEnergy=function(t){return this.eachNode((function(t,e){var i=e.v.magnitude();.5*e.m*i*i})),1};var s=function(t,e){return function(){return t.apply(e,arguments)}};t.requestAnimationFrame=s(this.requestAnimationFrame||this.webkitRequestAnimationFrame||this.mozRequestAnimationFrame||this.oRequestAnimationFrame||this.msRequestAnimationFrame||function(t,e){this.setTimeout(t,10)},this),o.ForceDirected.prototype.start=function(e,i,n){var o=this;this._started||(this._started=!0,this._stop=!1,void 0!==n&&n(),t.requestAnimationFrame((function n(){o.tick(.03),void 0!==e&&e(),o._stop||o.totalEnergy()<o.minEnergyThreshold?(o._started=!1,void 0!==i&&i()):t.requestAnimationFrame(n)})))},o.ForceDirected.prototype.stop=function(){this._stop=!0},o.ForceDirected.prototype.tick=function(t){this.applyCoulombsLaw(),this.applyHookesLaw(),this.attractToCentre(),this.updateVelocity(t),this.updatePosition(t)},o.ForceDirected.prototype.nearest=function(t){var e={node:null,point:null,distance:null},i=this;return this.graph.nodes.forEach((function(n){var o=i.point(n),s=o.p.subtract(t).magnitude();(null===e.distance||s<e.distance)&&(e={node:n,point:o,distance:s})})),e},o.ForceDirected.prototype.getBoundingBox=function(){var t=new c(-2,-2),e=new c(2,2);this.eachNode((function(i,n){n.p.x<t.x&&(t.x=n.p.x),n.p.y<t.y&&(t.y=n.p.y),n.p.x>e.x&&(e.x=n.p.x),n.p.y>e.y&&(e.y=n.p.y)}));var i=e.subtract(t).multiply(.07);return{bottomleft:t.subtract(i),topright:e.add(i)}};var c=t.Vector=function(t,e){this.x=t,this.y=e};c.random=function(){return new c(10*(Math.random()-.5),10*(Math.random()-.5))},c.prototype.add=function(t){return new c(this.x+t.x,this.y+t.y)},c.prototype.subtract=function(t){return new c(this.x-t.x,this.y-t.y)},c.prototype.multiply=function(t){return new c(this.x*t,this.y*t)},c.prototype.divide=function(t){return new c(this.x/t||0,this.y/t||0)},c.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},c.prototype.normal=function(){return new c(-this.y,this.x)},c.prototype.normalise=function(){return this.divide(this.magnitude())},o.ForceDirected.Point=function(t,e,i){this.p=t,this.m=e,this.id=i,this.v=new c(0,0),this.a=new c(0,0)},o.ForceDirected.Point.prototype.applyForce=function(t){this.a=this.a.add(t.divide(this.m))},o.ForceDirected.Spring=function(t,e,i,n){this.point1=t,this.point2=e,this.length=i,this.k=n};var a=t.Renderer=function(t,e,i,n,o,s,c){this.layout=t,this.clear=e,this.drawEdge=i,this.drawNode=n,this.onRenderStop=o,this.onRenderStart=s,this.onRenderFrame=c,this.layout.graph.addGraphListener(this)};a.prototype.graphChanged=function(t){this.start()},a.prototype.start=function(t){var e=this;this.layout.start((function(){e.clear(),e.layout.eachEdge((function(t,i){e.drawEdge(t,i.point1.p,i.point2.p)})),e.layout.eachNode((function(t,i){e.drawNode(t,i)})),void 0!==e.onRenderFrame&&e.onRenderFrame()}),this.onRenderStop,this.onRenderStart)},a.prototype.stop=function(){this.layout.stop()},Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var i,n;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),s=o.length>>>0;if("[object Function]"!={}.toString.call(t))throw new TypeError(t+" is not a function");e&&(i=e),n=0;while(n<s){var c;n in o&&(c=o[n],t.call(i,c,n,o)),n++}});var r=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};return t}))},b754:function(t,e,i){"use strict";i("5b27")},cb91:function(t,e,i){},f5f3:function(t,e,i){"use strict";i("9c79")}});
//# sourceMappingURL=app.b3b0f3f7.js.map